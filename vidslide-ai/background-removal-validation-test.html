<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒŒæ™¯ç§»é™¤åŠŸèƒ½éªŒè¯æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
        }

        .test-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .test-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }

        .test-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        button:hover {
            background: #2980b9;
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        button.success {
            background: #27ae60;
        }

        button.error {
            background: #e74c3c;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }

        .status.loading {
            background: #f39c12;
            color: white;
        }

        .status.success {
            background: #27ae60;
            color: white;
        }

        .status.error {
            background: #e74c3c;
            color: white;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-item {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            background: #fafafa;
        }

        .result-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .result-item .metric {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        .result-item .metric span:first-child {
            font-weight: bold;
        }

        .image-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .image-container {
            text-align: center;
        }

        .image-container img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .image-container .label {
            margin-top: 10px;
            font-weight: bold;
            color: #2c3e50;
        }

        .mask-overlay {
            position: relative;
            display: inline-block;
        }

        .mask-preview {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0.7;
            pointer-events: none;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: #3498db;
            transition: width 0.3s;
        }

        .console-output {
            background: #2c3e50;
            color: #ecf0f1;
            font-family: 'Courier New', monospace;
            padding: 15px;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 12px;
            line-height: 1.4;
        }

        .console-output .log-entry {
            margin: 2px 0;
        }

        .console-output .error {
            color: #e74c3c;
        }

        .console-output .success {
            color: #27ae60;
        }

        .summary-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .summary-card h3 {
            margin-bottom: 15px;
        }

        .score-display {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }

        .recommendations {
            margin-top: 20px;
        }

        .recommendations ul {
            list-style: none;
            padding: 0;
        }

        .recommendations li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .recommendations li:before {
            content: "âœ“";
            margin-right: 10px;
            color: #27ae60;
        }

        .suggestions-display {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }

        .suggestions-display .metric {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  èƒŒæ™¯ç§»é™¤åŠŸèƒ½éªŒè¯æµ‹è¯•</h1>
            <p>æµ‹è¯•DeepLab v3è¯­ä¹‰åˆ†å‰²å’ŒèƒŒæ™¯ç§»é™¤ç®—æ³•ï¼ŒåŒ…æ‹¬å‡†ç¡®æ€§ã€æ€§èƒ½å’Œå†…å­˜ç®¡ç†</p>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ éªŒè¯æ§åˆ¶é¢æ¿</h2>
            <div class="test-controls">
                <button id="start-validation" onclick="startValidation()">å¼€å§‹å…¨é¢éªŒè¯</button>
                <button id="test-tensorflow" onclick="testTensorFlow()">æµ‹è¯•TensorFlowé›†æˆ</button>
                <button id="test-model" onclick="testModelLoading()">æµ‹è¯•æ¨¡å‹åŠ è½½</button>
                <button id="test-accuracy" onclick="testAccuracy()">æµ‹è¯•åˆ†å‰²å‡†ç¡®æ€§</button>
                <button id="test-performance" onclick="testPerformance()">æµ‹è¯•æ€§èƒ½åŸºå‡†</button>
                <button id="test-memory" onclick="testMemory()">æµ‹è¯•å†…å­˜ç®¡ç†</button>
                <button id="clear-console" onclick="clearConsole()">æ¸…ç©ºæ§åˆ¶å°</button>
            </div>

            <div id="overall-status" class="status" style="display: none;">
                éªŒè¯çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ
            </div>

            <div id="progress-container" style="display: none;">
                <div>éªŒè¯è¿›åº¦:</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š éªŒè¯ç»“æœ</h2>
            <div id="results-container">
                <p>è¯·ç‚¹å‡»"å¼€å§‹å…¨é¢éªŒè¯"æ¥è¿è¡Œæµ‹è¯•</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ–¼ï¸ èƒŒæ™¯ç§»é™¤æ¼”ç¤º</h2>
            <div id="demo-container">
                <p>é€‰æ‹©ä¸€å¼ æµ‹è¯•å›¾ç‰‡è¿›è¡ŒèƒŒæ™¯ç§»é™¤æ¼”ç¤º</p>
                <div class="test-controls">
                    <button onclick="demoRemoval('person-centered')">å±…ä¸­äººç‰©</button>
                    <button onclick="demoRemoval('person-offset')">åç§»äººç‰©</button>
                    <button onclick="demoRemoval('complex-scene')">å¤æ‚åœºæ™¯</button>
                    <button onclick="demoRemoval('small-person')">å°äººç‰©</button>
                    <button onclick="demoRemoval('no-person')">æ— äººåœºæ™¯</button>
                </div>
                <div id="demo-results"></div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ’» æ§åˆ¶å°è¾“å‡º</h2>
            <div class="console-output" id="console-output">
                ç­‰å¾…éªŒè¯å¼€å§‹...
            </div>
        </div>
    </div>

    <script type="module">
        import { validateBackgroundRemoval, getBackgroundRemovalValidationSummary } from './background-removal-validation.js'

        let currentValidation = null
        let consoleElement = document.getElementById('console-output')

        // æ§åˆ¶å°æ—¥å¿—å‡½æ•°
        function log(message, type = 'info') {
            const entry = document.createElement('div')
            entry.className = `log-entry ${type}`
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`
            consoleElement.appendChild(entry)
            consoleElement.scrollTop = consoleElement.scrollHeight
            console.log(message)
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress(percent) {
            const progressFill = document.getElementById('progress-fill')
            const progressContainer = document.getElementById('progress-container')

            progressContainer.style.display = 'block'
            progressFill.style.width = `${percent}%`
        }

        // æ›´æ–°çŠ¶æ€
        function updateStatus(message, type = 'loading') {
            const statusElement = document.getElementById('overall-status')
            statusElement.textContent = message
            statusElement.className = `status ${type}`
            statusElement.style.display = 'block'
        }

        // æ˜¾ç¤ºéªŒè¯ç»“æœ
        function displayResults(summary) {
            const container = document.getElementById('results-container')
            const { overallScore, results, recommendations, nextSteps } = summary

            let html = `
                <div class="summary-card">
                    <h3>ğŸ† éªŒè¯å®Œæˆæ€»ç»“</h3>
                    <div class="score-display">${overallScore}/100</div>
                    <p style="text-align: center; margin-bottom: 20px;">
                        ${overallScore >= 80 ? 'ä¼˜ç§€' : overallScore >= 60 ? 'è‰¯å¥½' : 'éœ€è¦æ”¹è¿›'}
                    </p>
                </div>

                <div class="results-grid">
            `

            results.forEach(result => {
                const icon = result.success ? 'âœ…' : 'âŒ'
                const statusClass = result.success ? 'success' : 'error'

                html += `
                    <div class="result-item">
                        <h3>${icon} ${result.name}</h3>
                        <div class="metric">
                            <span>çŠ¶æ€:</span>
                            <span class="${statusClass}">${result.success ? 'é€šè¿‡' : 'å¤±è´¥'}</span>
                        </div>
                    </div>
                `
            })

            html += `
                </div>

                <div class="recommendations">
                    <h3>ğŸ’¡ å®æ–½å»ºè®®</h3>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>

                    <h3 style="margin-top: 20px;">ğŸš€ åç»­æ­¥éª¤</h3>
                    <ul>
                        ${nextSteps.map(step => `<li>${step}</li>`).join('')}
                    </ul>
                </div>
            `

            container.innerHTML = html
        }

        // å¼€å§‹å…¨é¢éªŒè¯
        window.startValidation = async function() {
            if (currentValidation) return

            try {
                updateStatus('æ­£åœ¨åˆå§‹åŒ–éªŒè¯å™¨...', 'loading')
                updateProgress(0)

                log('ğŸš€ å¼€å§‹èƒŒæ™¯ç§»é™¤åŠŸèƒ½å…¨é¢éªŒè¯', 'success')

                const validator = await validateBackgroundRemoval()
                currentValidation = validator

                updateProgress(100)
                updateStatus('éªŒè¯å®Œæˆï¼', 'success')

                displayResults(validator)

                log(`ğŸ† éªŒè¯å®Œæˆ - æ€»ä½“å¾—åˆ†: ${validator.overallScore}/100`, 'success')

            } catch (error) {
                updateStatus('éªŒè¯å¤±è´¥: ' + error.message, 'error')
                log('âŒ éªŒè¯å¤±è´¥: ' + error.message, 'error')
            }
        }

        // æµ‹è¯•TensorFlowé›†æˆ
        window.testTensorFlow = async function() {
            try {
                updateStatus('æµ‹è¯•TensorFlow.jsé›†æˆ...', 'loading')

                const summary = getBackgroundRemovalValidationSummary()
                if (!summary.tensorflowIntegration.success) {
                    const validator = await import('./background-removal-validation.js').then(m => m.getBackgroundRemovalValidator())
                    await validator.validateTensorFlowIntegration()
                }

                const result = getBackgroundRemovalValidationSummary().tensorflowIntegration
                updateStatus(
                    result.success ? 'TensorFlowé›†æˆæˆåŠŸ' : 'TensorFlowé›†æˆå¤±è´¥',
                    result.success ? 'success' : 'error'
                )

                log(`TensorFlowé›†æˆæµ‹è¯•: ${result.success ? 'é€šè¿‡' : 'å¤±è´¥'}`)

            } catch (error) {
                updateStatus('TensorFlowæµ‹è¯•å¤±è´¥', 'error')
                log('TensorFlowæµ‹è¯•é”™è¯¯: ' + error.message, 'error')
            }
        }

        // æµ‹è¯•æ¨¡å‹åŠ è½½
        window.testModelLoading = async function() {
            try {
                updateStatus('æµ‹è¯•DeepLabæ¨¡å‹åŠ è½½...', 'loading')

                const validator = await import('./background-removal-validation.js').then(m => m.getBackgroundRemovalValidator())
                const success = await validator.validateModelLoading()

                updateStatus(
                    success ? 'æ¨¡å‹åŠ è½½æµ‹è¯•é€šè¿‡' : 'æ¨¡å‹åŠ è½½æµ‹è¯•å¤±è´¥',
                    success ? 'success' : 'error'
                )

                log(`æ¨¡å‹åŠ è½½æµ‹è¯•: ${success ? 'é€šè¿‡' : 'å¤±è´¥'}`)

            } catch (error) {
                updateStatus('æ¨¡å‹åŠ è½½æµ‹è¯•å¤±è´¥', 'error')
                log('æ¨¡å‹åŠ è½½æµ‹è¯•é”™è¯¯: ' + error.message, 'error')
            }
        }

        // æµ‹è¯•åˆ†å‰²å‡†ç¡®æ€§
        window.testAccuracy = async function() {
            try {
                updateStatus('æµ‹è¯•åˆ†å‰²å‡†ç¡®æ€§...', 'loading')

                const validator = await import('./background-removal-validation.js').then(m => m.getBackgroundRemovalValidator())
                const success = await validator.validateSegmentationAccuracy()

                updateStatus(
                    success ? 'åˆ†å‰²å‡†ç¡®æ€§æµ‹è¯•é€šè¿‡' : 'åˆ†å‰²å‡†ç¡®æ€§æµ‹è¯•å¤±è´¥',
                    success ? 'success' : 'error'
                )

                log(`åˆ†å‰²å‡†ç¡®æ€§æµ‹è¯•: ${success ? 'é€šè¿‡' : 'å¤±è´¥'}`)

            } catch (error) {
                updateStatus('å‡†ç¡®æ€§æµ‹è¯•å¤±è´¥', 'error')
                log('å‡†ç¡®æ€§æµ‹è¯•é”™è¯¯: ' + error.message, 'error')
            }
        }

        // æµ‹è¯•æ€§èƒ½åŸºå‡†
        window.testPerformance = async function() {
            try {
                updateStatus('æµ‹è¯•æ€§èƒ½åŸºå‡†...', 'loading')

                const validator = await import('./background-removal-validation.js').then(m => m.getBackgroundRemovalValidator())
                const success = await validator.validatePerformanceBenchmark()

                updateStatus(
                    success ? 'æ€§èƒ½åŸºå‡†æµ‹è¯•é€šè¿‡' : 'æ€§èƒ½åŸºå‡†æµ‹è¯•å¤±è´¥',
                    success ? 'success' : 'error'
                )

                log(`æ€§èƒ½åŸºå‡†æµ‹è¯•: ${success ? 'é€šè¿‡' : 'å¤±è´¥'}`)

            } catch (error) {
                updateStatus('æ€§èƒ½æµ‹è¯•å¤±è´¥', 'error')
                log('æ€§èƒ½æµ‹è¯•é”™è¯¯: ' + error.message, 'error')
            }
        }

        // æµ‹è¯•å†…å­˜ç®¡ç†
        window.testMemory = async function() {
            try {
                updateStatus('æµ‹è¯•å†…å­˜ç®¡ç†...', 'loading')

                const validator = await import('./background-removal-validation.js').then(m => m.getBackgroundRemovalValidator())
                const success = await validator.validateMemoryManagement()

                updateStatus(
                    success ? 'å†…å­˜ç®¡ç†æµ‹è¯•é€šè¿‡' : 'å†…å­˜ç®¡ç†æµ‹è¯•å¤±è´¥',
                    success ? 'success' : 'error'
                )

                log(`å†…å­˜ç®¡ç†æµ‹è¯•: ${success ? 'é€šè¿‡' : 'å¤±è´¥'}`)

            } catch (error) {
                updateStatus('å†…å­˜æµ‹è¯•å¤±è´¥', 'error')
                log('å†…å­˜æµ‹è¯•é”™è¯¯: ' + error.message, 'error')
            }
        }

        // æ¼”ç¤ºèƒŒæ™¯ç§»é™¤æ•ˆæœ
        window.demoRemoval = async function(type) {
            try {
                updateStatus(`æ¼”ç¤º${type}èƒŒæ™¯ç§»é™¤...`, 'loading')

                const demoContainer = document.getElementById('demo-results')
                demoContainer.innerHTML = '<p>æ­£åœ¨ç”Ÿæˆæ¼”ç¤ºå›¾åƒ...</p>'

                // åˆ›å»ºæµ‹è¯•å›¾åƒ
                const canvas = document.createElement('canvas')
                const ctx = canvas.getContext('2d')
                canvas.width = 400
                canvas.height = 300

                // ç”Ÿæˆä¸åŒç±»å‹çš„æµ‹è¯•å›¾åƒ
                generateDemoImage(ctx, canvas.width, canvas.height, type)

                const image = new Image()
                image.src = canvas.toDataURL()
                image.style.maxWidth = '100%'

                await new Promise(resolve => image.onload = resolve)

                // å¯¼å…¥èƒŒæ™¯ç§»é™¤æ¨¡å—
                const { removeImageBackground, getBackgroundRemovalSuggestions } = await import('./src/utils/backgroundRemoval.js')

                // è·å–å»ºè®®
                const suggestions = await getBackgroundRemovalSuggestions(image)

                // æ˜¾ç¤ºå»ºè®®
                const suggestionsHtml = `
                    <div class="suggestions-display">
                        <strong>AIåˆ†æç»“æœ:</strong><br>
                        <div class="metric">
                            <span>æ£€æµ‹åˆ°äººç‰©:</span>
                            <span>${suggestions.hasPerson ? 'æ˜¯' : 'å¦'}</span>
                        </div>
                        <div class="metric">
                            <span>ç½®ä¿¡åº¦:</span>
                            <span>${(suggestions.confidence * 100).toFixed(1)}%</span>
                        </div>
                        <div class="metric">
                            <span>é¢„ä¼°å¤„ç†æ—¶é—´:</span>
                            <span>${suggestions.estimatedProcessingTime}ms</span>
                        </div>
                        <div class="metric">
                            <span>æ¨èè´¨é‡:</span>
                            <span>${suggestions.recommendedSettings?.quality || 'æœªçŸ¥'}</span>
                        </div>
                    </div>
                `

                if (!suggestions.hasPerson) {
                    demoContainer.innerHTML = suggestionsHtml + '<p style="color: #f39c12;">âš ï¸ æœªæ£€æµ‹åˆ°äººç‰©ï¼ŒèƒŒæ™¯ç§»é™¤å¯èƒ½æ•ˆæœä¸ä½³</p>'
                    updateStatus('AIåˆ†æå®Œæˆ - æœªæ£€æµ‹åˆ°äººç‰©', 'success')
                    return
                }

                // æ‰§è¡ŒèƒŒæ™¯ç§»é™¤
                const result = await removeImageBackground(image)

                if (result.success && result.resultImage) {
                    // æ˜¾ç¤ºåŸå§‹å›¾åƒå’Œå¤„ç†ç»“æœ
                    const originalContainer = document.createElement('div')
                    originalContainer.className = 'image-container'
                    originalContainer.innerHTML = `
                        <img src="${image.src}" alt="åŸå§‹å›¾åƒ">
                        <div class="label">åŸå§‹å›¾åƒ</div>
                    `

                    const resultContainer = document.createElement('div')
                    resultContainer.className = 'image-container'
                    resultContainer.innerHTML = `
                        <img src="${result.resultImage.toDataURL()}" alt="èƒŒæ™¯ç§»é™¤ç»“æœ">
                        <div class="label">èƒŒæ™¯ç§»é™¤ç»“æœ</div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            å¤„ç†æ—¶é—´: ${result.processingTime}ms<br>
                            ç½®ä¿¡åº¦: ${(result.confidence * 100).toFixed(1)}%
                        </div>
                    `

                    demoContainer.innerHTML = suggestionsHtml
                    demoContainer.appendChild(originalContainer)
                    demoContainer.appendChild(resultContainer)

                    updateStatus(`èƒŒæ™¯ç§»é™¤æ¼”ç¤ºå®Œæˆ - ç½®ä¿¡åº¦: ${(result.confidence * 100).toFixed(1)}%`, 'success')
                    log(`èƒŒæ™¯ç§»é™¤æ¼”ç¤ºå®Œæˆ: ${type}, ç½®ä¿¡åº¦ ${(result.confidence * 100).toFixed(1)}%`)

                } else {
                    demoContainer.innerHTML = suggestionsHtml + '<p style="color: #e74c3c;">èƒŒæ™¯ç§»é™¤å¤±è´¥</p>'
                    updateStatus('èƒŒæ™¯ç§»é™¤æ¼”ç¤ºå¤±è´¥', 'error')
                }

            } catch (error) {
                updateStatus('èƒŒæ™¯ç§»é™¤æ¼”ç¤ºå‡ºé”™', 'error')
                log('èƒŒæ™¯ç§»é™¤æ¼”ç¤ºé”™è¯¯: ' + error.message, 'error')
            }
        }

        // ç”Ÿæˆæ¼”ç¤ºå›¾åƒ
        function generateDemoImage(ctx, width, height, type) {
            // ç»˜åˆ¶èƒŒæ™¯
            ctx.fillStyle = '#f0f0f0'
            ctx.fillRect(0, 0, width, height)

            switch (type) {
                case 'person-centered':
                    // å±…ä¸­äººç‰©
                    ctx.fillStyle = '#4A90E2'
                    ctx.fillRect(width * 0.35, height * 0.2, width * 0.3, height * 0.6)
                    // æ·»åŠ ä¸€äº›èƒŒæ™¯å…ƒç´ 
                    ctx.fillStyle = '#95A5A6'
                    ctx.fillRect(width * 0.1, height * 0.1, width * 0.1, height * 0.1)
                    ctx.fillRect(width * 0.8, height * 0.8, width * 0.1, height * 0.1)
                    break

                case 'person-offset':
                    // åç§»äººç‰©
                    ctx.fillStyle = '#4A90E2'
                    ctx.fillRect(width * 0.6, height * 0.3, width * 0.25, height * 0.5)
                    break

                case 'complex-scene':
                    // å¤æ‚åœºæ™¯
                    for (let i = 0; i < 10; i++) {
                        ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 60%)`
                        ctx.fillRect(
                            Math.random() * width * 0.8,
                            Math.random() * height * 0.8,
                            Math.random() * width * 0.1 + 20,
                            Math.random() * height * 0.1 + 20
                        )
                    }
                    // æ·»åŠ äººç‰©
                    ctx.fillStyle = '#4A90E2'
                    ctx.fillRect(width * 0.4, height * 0.25, width * 0.2, height * 0.5)
                    break

                case 'small-person':
                    // å°äººç‰©
                    ctx.fillStyle = '#4A90E2'
                    ctx.fillRect(width * 0.45, height * 0.4, width * 0.1, height * 0.2)
                    // å¤§é‡èƒŒæ™¯å¹²æ‰°
                    for (let i = 0; i < 15; i++) {
                        ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 60%)`
                        ctx.fillRect(
                            Math.random() * width,
                            Math.random() * height,
                            Math.random() * 30 + 10,
                            Math.random() * 30 + 10
                        )
                    }
                    break

                case 'no-person':
                    // æ— äººç‰©
                    ctx.fillStyle = '#E74C3C'
                    ctx.fillRect(width * 0.2, height * 0.2, width * 0.2, height * 0.2)
                    ctx.fillStyle = '#27AE60'
                    ctx.fillRect(width * 0.6, height * 0.5, width * 0.15, height * 0.15)
                    ctx.fillStyle = '#F39C12'
                    ctx.beginPath()
                    ctx.arc(width * 0.4, height * 0.7, width * 0.08, 0, 2 * Math.PI)
                    ctx.fill()
                    break
            }
        }

        // æ¸…ç©ºæ§åˆ¶å°
        window.clearConsole = function() {
            consoleElement.innerHTML = 'æ§åˆ¶å°å·²æ¸…ç©º...'
        }

        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        log('èƒŒæ™¯ç§»é™¤éªŒè¯æµ‹è¯•é¡µé¢å·²åŠ è½½å®Œæˆ', 'success')
        log('ç‚¹å‡»"å¼€å§‹å…¨é¢éªŒè¯"å¼€å§‹æµ‹è¯•', 'info')
    </script>
</body>
</html>