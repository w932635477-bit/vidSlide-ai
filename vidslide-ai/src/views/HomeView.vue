/** * HomeView.vue - VidSlide AI é¦–é¡µ * å®Œå…¨å¤åˆ»æ¡Œé¢UIè®¾è®¡å›¾ */

<template>
  <div class="vidslide-home">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="vidslide-navbar">
      <div class="navbar-container">
        <!-- å·¦ä¾§Logo -->
        <a href="/" class="navbar-logo">
          <div class="navbar-logo-icon">
            <div class="logo-icon-bg" />
            <div class="logo-icon-glow" />
            <span class="logo-letter">V</span>
            <div class="logo-icon-shine" />
          </div>
          <span class="logo-text">
            <span class="logo-text-main">VidSlide</span>
            <span class="logo-text-ai">AI</span>
          </span>
        </a>

        <!-- ä¸­é—´å¯¼èˆªé“¾æ¥ -->
        <div class="navbar-nav">
          <a href="#features" class="navbar-nav-link">äº§å“ç‰¹ç‚¹</a>
          <a href="#workspace" class="navbar-nav-link">å·¥ä½œç©ºé—´</a>
          <a href="#pricing" class="navbar-nav-link">å®šä»·</a>
          <a href="#about" class="navbar-nav-link">å…³äºæˆ‘ä»¬</a>
        </div>

        <!-- å³ä¾§æ“ä½œæŒ‰é’® -->
        <div class="navbar-actions">
          <!-- å¤šè¯­è¨€åˆ‡æ¢æŒ‰é’® -->
          <div class="lang-switcher-wrapper" :class="{ 'show-menu': showLangMenu }">
            <button class="btn-lang-switcher" @click="toggleLangMenu" :title="currentLang.name">
              <span class="lang-flag">{{ currentLang.flag }}</span>
              <span class="lang-code">{{ currentLang.code }}</span>
              <span class="lang-arrow">â–¼</span>
            </button>
            <!-- è¯­è¨€ä¸‹æ‹‰èœå•å ä½ -->
            <div ref="langMenuRef" />
          </div>
          <button class="btn-login">ç™»å½•</button>
          <button class="btn-signup">æ³¨å†Œ</button>
        </div>
      </div>
    </nav>

    <!-- è¯­è¨€ä¸‹æ‹‰èœå• - ä½¿ç”¨Teleportæ¸²æŸ“åˆ°body -->
    <Teleport to="body">
      <div v-if="showLangMenu" class="lang-menu" :style="langMenuStyle" @click.stop>
        <button
          v-for="lang in languages"
          :key="lang.code"
          class="lang-menu-item"
          :class="{ active: currentLang.code === lang.code }"
          @click="switchLanguage(lang)"
        >
          <span class="lang-flag">{{ lang.flag }}</span>
          <span class="lang-name">{{ lang.name }}</span>
          <span class="lang-code-small">{{ lang.code }}</span>
        </button>
      </div>
    </Teleport>

    <!-- è‹±é›„åŒºåŸŸ -->
    <section class="hero-section">
      <!-- å·¦ä¾§å†…å®¹åŒºåŸŸ -->
      <div class="hero-content">
        <!-- AIé©±åŠ¨æ ‡ç­¾ -->
        <div class="hero-tag">
          <div class="hero-tag-dot" />
          AI é©±åŠ¨çš„è§†é¢‘è½¬æ¼”ç¤ºæ–‡ç¨¿
        </div>

        <!-- ä¸»æ ‡é¢˜ -->
        <h1 class="hero-title">ä»è§†é¢‘åˆ° å®Œç¾æ¼”ç¤ºæ–‡ç¨¿</h1>

        <!-- å‰¯æ ‡é¢˜ -->
        <p class="hero-subtitle">
          ä¸Šä¼ è§†é¢‘ï¼Œè®© AI è‡ªåŠ¨åˆ†æå¹¶ç”ŸæˆåŒæ­¥æ¼”ç¤ºæ–‡ç¨¿ã€‚èŠ‚çœ 80% çš„å†…å®¹åˆ›ä½œæ—¶é—´ã€‚
        </p>

        <!-- æŒ‰é’®ç»„ -->
        <div class="hero-buttons">
          <button class="btn-primary-large" onclick="window.location.hash = '#/workspace'">
            å…è´¹å¼€å§‹ â†’
          </button>
          <button class="btn-secondary-large" @click="watchDemo">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M8 5v14l11-7z" />
            </svg>
            è§‚çœ‹æ¼”ç¤º
          </button>
        </div>

        <!-- åº•éƒ¨æŒ‡ç¤ºå™¨ -->
        <div class="hero-indicators">
          <div class="indicator-dots">
            <div class="indicator-dot active" />
            <div class="indicator-dot" />
            <div class="indicator-dot" />
            <div class="indicator-dot" />
          </div>
          <span class="indicator-text">10,000 + åˆ›ä½œè€…æ­£åœ¨ä½¿ç”¨</span>
        </div>
      </div>

      <!-- å³ä¾§æ‰‹æœºå±•ç¤ºåŒº -->
      <div class="hero-showcase">
        <!-- ç§‘æŠ€å…‰æ•ˆèƒŒæ™¯ -->
        <div class="tech-effects">
          <div class="tech-lightning" />
          <div class="tech-lightning" />
          <div class="tech-lines" />
          <div class="tech-lines" />
        </div>

        <!-- æ‰‹æœºæ¨¡å‹ -->
        <div class="phone-mockup">
          <div class="phone-screen">
            <!-- æ‰‹æœºé¡¶éƒ¨çŠ¶æ€æ  -->
            <div class="phone-status-bar">
              <span class="status-time">9:16</span>
              <div class="status-icons">
                <span class="status-icon wifi-icon">ğŸ“¶</span>
                <span class="status-icon battery-icon">ğŸ”‹</span>
              </div>
            </div>

            <!-- åº”ç”¨é¡¶éƒ¨æ  -->
            <div class="app-header">
              <button class="app-menu-btn">â˜°</button>
              <span class="app-name">Saapte</span>
              <div class="app-header-actions">
                <button class="app-search-btn">ğŸ”</button>
                <button class="app-more-btn">â‹¯</button>
              </div>
            </div>

            <!-- èŠå¤©æ°”æ³¡åŒºåŸŸ -->
            <div class="chat-bubbles">
              <div class="chat-bubble">Grioidy kath lleppik!</div>
              <div class="chat-bubble">Gumiijos alService</div>
            </div>

            <!-- ä¸Šä¼ åŒºåŸŸ - åŠ¨ç”»å±•ç¤ºåŒº -->
            <div class="upload-section">
              <div class="upload-header">
                {{ animationStepText }}
              </div>

              <!-- æ­¥éª¤1: è§†é¢‘ä¸Šä¼  -->
              <div v-if="animationStep === 1" class="animation-step step-upload">
                <div class="upload-area">
                  <button class="upload-btn-left">
                    <span class="upload-icon">ğŸ“¤</span>
                    Upload
                  </button>
                  <div class="file-icon-container">
                    <div class="file-icon-large">
                      <div class="file-icon-content">
                        <div class="laptop-person">ğŸ’»ğŸ‘¤</div>
                      </div>
                    </div>
                    <div class="cursor-hand">ğŸ‘†</div>
                  </div>
                </div>
                <div class="upload-progress">
                  <div class="progress-bar" :style="{ width: uploadProgress + '%' }" />
                </div>
              </div>

              <!-- æ­¥éª¤2: AIåˆ†æè§†é¢‘ -->
              <div v-if="animationStep === 2" class="animation-step step-analyze">
                <div class="analyze-container">
                  <div class="analyze-icon">ğŸ¤–</div>
                  <div class="analyze-text">AI Analyzing Video...</div>
                  <div class="analyze-progress">
                    <div class="progress-bar" :style="{ width: analyzeProgress + '%' }" />
                  </div>
                  <!-- ç²’å­æ•ˆæœ -->
                  <div class="particles">
                    <div v-for="i in 12" :key="i" class="particle" :style="getParticleStyle(i)" />
                  </div>
                </div>
              </div>

              <!-- æ­¥éª¤3: ç”ŸæˆPPT -->
              <div v-if="animationStep === 3" class="animation-step step-generate">
                <div class="generate-container">
                  <div class="ppt-preview">
                    <div
                      v-for="(slide, index) in pptSlides"
                      :key="index"
                      class="ppt-slide"
                      :class="{ active: index === currentSlideIndex }"
                    >
                      <div class="slide-content">
                        <div class="slide-title">
                          {{ slide.title }}
                        </div>
                        <div class="slide-bullets">
                          <div v-for="(bullet, bi) in slide.bullets" :key="bi" class="slide-bullet">
                            {{ bullet }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="generate-progress">
                    <div class="progress-text">
                      Generating Slides: {{ currentSlideIndex + 1 }}/{{ pptSlides.length }}
                    </div>
                    <div class="progress-bar" :style="{ width: generateProgress + '%' }" />
                  </div>
                </div>
              </div>

              <!-- æ­¥éª¤4: åˆæˆè§†é¢‘ - ç”»ä¸­ç”»æ•ˆæœ -->
              <div v-if="animationStep === 4" class="animation-step step-compose">
                <div class="compose-container">
                  <div class="video-preview">
                    <div class="video-frame">
                      <div class="video-content">
                        <!-- ä¸»è§†é¢‘èƒŒæ™¯ -->
                        <div class="main-video-bg">
                          <div class="video-pattern" />
                        </div>

                        <!-- PPTå¹»ç¯ç‰‡ - å„ç§ä¸“ä¸šæ•ˆæœ -->
                        <div class="ppt-overlay">
                          <div
                            v-for="(slide, index) in pptSlides"
                            :key="index"
                            class="ppt-slide-overlay"
                            :class="getSlideAnimationClass(index)"
                            :style="getSlideOverlayStyle(index)"
                          >
                            <div class="slide-background" />
                            <div class="slide-content-overlay">
                              <div class="overlay-title">
                                {{ slide.title }}
                              </div>
                              <div class="overlay-bullets">
                                <div
                                  v-for="(bullet, bi) in slide.bullets"
                                  :key="bi"
                                  class="overlay-bullet"
                                >
                                  {{ bullet }}
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- ç”»ä¸­ç”»äººç‰©è§†é¢‘ -->
                        <div
                          class="pip-person"
                          :class="{
                            'pip-minimized': isPipMinimized,
                            'pip-expanded': isPipExpanded
                          }"
                          :style="getPipStyle()"
                        >
                          <div class="pip-video-frame">
                            <div class="pip-person-icon">ğŸ‘¤</div>
                            <div class="pip-wave" />
                          </div>
                        </div>

                        <!-- è§†é¢‘æ—¶é—´è½´ -->
                        <div class="video-timeline">
                          <div
                            class="timeline-progress"
                            :style="{ width: composeProgress + '%' }"
                          />
                          <div class="timeline-markers">
                            <div
                              v-for="(slide, index) in pptSlides"
                              :key="index"
                              class="timeline-marker"
                              :style="{ left: (index + 1) * 25 + '%' }"
                              :class="{ active: composeProgress >= (index + 1) * 25 }"
                            >
                              >
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="compose-progress">
                    <div class="progress-text">Composing Video with PPT Effects...</div>
                    <div class="progress-bar" :style="{ width: composeProgress + '%' }" />
                  </div>
                </div>
              </div>

              <!-- æ­¥éª¤5: å®Œæˆ -->
              <div v-if="animationStep === 5" class="animation-step step-done">
                <div class="done-container">
                  <div class="done-icon-large">âœ…</div>
                  <div class="done-text">Video Ready!</div>
                  <div class="done-subtext">PPT slides inserted successfully</div>
                </div>
              </div>
            </div>

            <!-- æ¼”ç¤ºæ–‡ç¨¿åˆ—è¡¨ -->
            <div class="presentations-section">
              <div class="presentations-header">Presente</div>

              <div class="presentations-list">
                <div class="presentation-item">
                  <span class="presentation-name">Usmay.Lob</span>
                  <div class="presentation-actions">
                    <button class="action-icon">ğŸ”„</button>
                    <button class="action-icon">ğŸ”</button>
                  </div>
                </div>

                <div class="presentation-item">
                  <span class="presentation-name">Dullyeebenit.npr</span>
                  <button class="action-icon">ğŸ“·</button>
                </div>

                <button class="presentation-action-btn">Rrove.Soncilim</button>
              </div>

              <!-- åº•éƒ¨æ¡Œå­å›¾ç‰‡ -->
              <div class="desk-image">
                <div class="desk-content">ğŸ–¥ï¸ğŸª‘</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script>
export default {
  name: 'HomeView',
  data() {
    return {
      currentStep: 0,
      steps: [
        { title: 'Upload', icon: 'ğŸ“¤', description: 'ä¸Šä¼ ä½ çš„è§†é¢‘å†…å®¹' },
        { title: 'AI Magic', icon: 'ğŸ¤–', description: 'AIæ™ºèƒ½åˆ†æå¤„ç†' },
        { title: 'Done!', icon: 'âœ…', description: 'ç”Ÿæˆä¸“ä¸šPPTæ¼”ç¤º' }
      ],
      stepInterval: null,
      showLangMenu: false,
      langMenuStyle: {
        position: 'fixed',
        top: '0px',
        right: '0px'
      },
      langMenuRef: null,
      currentLang: {
        code: 'zh',
        name: 'ä¸­æ–‡',
        flag: 'ğŸ‡¨ğŸ‡³'
      },
      languages: [
        { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
        { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
        { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
        { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },
        { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
        { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' }
      ],
      // åŠ¨ç”»çŠ¶æ€
      animationStep: 1,
      uploadProgress: 0,
      analyzeProgress: 0,
      generateProgress: 0,
      composeProgress: 0,
      currentSlideIndex: 0,
      animationInterval: null,
      isPipMinimized: false,
      isPipExpanded: false,
      pipPosition: { x: 50, y: 50 },
      pptSlides: [
        { title: 'Introduction', bullets: ['Welcome', 'Overview', 'Agenda'], effect: 'fade' },
        { title: 'Key Points', bullets: ['Point 1', 'Point 2', 'Point 3'], effect: 'slide' },
        { title: 'Analysis', bullets: ['Data', 'Insights', 'Conclusion'], effect: 'zoom' },
        { title: 'Summary', bullets: ['Recap', 'Next Steps', 'Q&A'], effect: 'rotate' }
      ]
    }
  },
  computed: {
    animationStepText() {
      const texts = {
        1: 'Upload Your Video',
        2: 'AI Analyzing...',
        3: 'Generating PPT...',
        4: 'Composing Video...',
        5: 'Done!'
      }
      return texts[this.animationStep] || 'Upload Your Video'
    }
  },
  mounted() {
    // å¯åŠ¨æ­¥éª¤åŠ¨ç”»å¾ªç¯
    this.startStepAnimation()
    // å¯åŠ¨æ¼”ç¤ºåŠ¨ç”»
    this.startDemoAnimation()
    // ç‚¹å‡»å¤–éƒ¨å…³é—­è¯­è¨€èœå•
    document.addEventListener('click', this.handleClickOutside)
    // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¯­è¨€è®¾ç½®
    const savedLang = localStorage.getItem('vidslide-lang')
    if (savedLang) {
      const lang = this.languages.find(l => l.code === savedLang)
      if (lang) {
        this.currentLang = lang
      }
    }
  },
  beforeUnmount() {
    // æ¸…ç†å®šæ—¶å™¨
    if (this.stepInterval) {
      clearInterval(this.stepInterval)
    }
    if (this.animationInterval) {
      clearInterval(this.animationInterval)
    }
    // ç§»é™¤äº‹ä»¶ç›‘å¬
    document.removeEventListener('click', this.handleClickOutside)
  },
  methods: {
    startStepAnimation() {
      this.stepInterval = setInterval(() => {
        this.currentStep = (this.currentStep + 1) % this.steps.length
      }, 3000) // æ¯3ç§’åˆ‡æ¢ä¸€æ­¥
    },

    startFree() {
      // è·³è½¬åˆ°å·¥ä½œé¡µé¢
      console.log('Start Free button clicked')
      // ç›´æ¥ä½¿ç”¨hashæ¨¡å¼è·³è½¬
      window.location.hash = '#/workspace'
    },

    watchDemo() {
      // æ’­æ”¾æ¼”ç¤ºè§†é¢‘
      console.log('è§‚çœ‹æ¼”ç¤ºè§†é¢‘')
      // è¿™é‡Œå¯ä»¥æ·»åŠ è§†é¢‘æ’­æ”¾é€»è¾‘
    },

    toggleLangMenu(event) {
      this.showLangMenu = !this.showLangMenu
      if (this.showLangMenu) {
        // è®¡ç®—ä¸‹æ‹‰èœå•ä½ç½®
        this.$nextTick(() => {
          const button = event.target.closest('.btn-lang-switcher')
          if (button) {
            const rect = button.getBoundingClientRect()
            this.langMenuStyle = {
              position: 'fixed',
              top: `${rect.bottom + 8}px`,
              right: `${window.innerWidth - rect.right}px`,
              zIndex: '99999'
            }
          }
        })
      } else {
        // é‡ç½®æ ·å¼
        this.langMenuStyle = {
          position: 'fixed',
          top: '0px',
          right: '0px'
        }
      }
    },

    switchLanguage(lang) {
      this.currentLang = lang
      this.showLangMenu = false
      // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
      localStorage.setItem('vidslide-lang', lang.code)
      // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è¯­è¨€åˆ‡æ¢é€»è¾‘
      console.log('åˆ‡æ¢è¯­è¨€åˆ°:', lang.name)
    },

    handleClickOutside(event) {
      const wrapper = event.target.closest('.lang-switcher-wrapper')
      if (!wrapper && this.showLangMenu) {
        this.showLangMenu = false
      }
    },

    startDemoAnimation() {
      // é‡ç½®çŠ¶æ€
      this.animationStep = 1
      this.uploadProgress = 0
      this.analyzeProgress = 0
      this.generateProgress = 0
      this.composeProgress = 0
      this.currentSlideIndex = 0

      // æ­¥éª¤1: ä¸Šä¼ è§†é¢‘ (2ç§’)
      const uploadInterval = setInterval(() => {
        this.uploadProgress += 2
        if (this.uploadProgress >= 100) {
          clearInterval(uploadInterval)
          setTimeout(() => {
            this.animationStep = 2
            this.startAnalyzeAnimation()
          }, 500)
        }
      }, 40)

      // å¾ªç¯åŠ¨ç”»
      setTimeout(() => {
        if (this.animationStep === 5) {
          setTimeout(() => {
            this.startDemoAnimation()
          }, 2000)
        }
      }, 20000)
    },

    startAnalyzeAnimation() {
      // æ­¥éª¤2: AIåˆ†æ (3ç§’)
      const analyzeInterval = setInterval(() => {
        this.analyzeProgress += 1.67
        if (this.analyzeProgress >= 100) {
          clearInterval(analyzeInterval)
          setTimeout(() => {
            this.animationStep = 3
            this.startGenerateAnimation()
          }, 500)
        }
      }, 50)
    },

    startGenerateAnimation() {
      // æ­¥éª¤3: ç”ŸæˆPPT (4ç§’)
      this.currentSlideIndex = 0
      const slideInterval = setInterval(() => {
        this.generateProgress += 2.5
        if (this.generateProgress >= 100) {
          clearInterval(slideInterval)
          setTimeout(() => {
            this.animationStep = 4
            this.startComposeAnimation()
          }, 500)
        } else if (this.generateProgress >= (this.currentSlideIndex + 1) * 25) {
          this.currentSlideIndex++
        }
      }, 100)
    },

    startComposeAnimation() {
      // æ­¥éª¤4: åˆæˆè§†é¢‘ (4ç§’ï¼Œæ›´é•¿æ—¶é—´å±•ç¤ºæ•ˆæœ)
      this.isPipMinimized = false
      this.isPipExpanded = false

      const composeInterval = setInterval(() => {
        this.composeProgress += 1.25 // 4ç§’å®Œæˆ (100 / 80 = 1.25)

        // æ§åˆ¶ç”»ä¸­ç”»çŠ¶æ€
        if (this.composeProgress >= 25 && !this.isPipMinimized) {
          this.isPipMinimized = true
        }
        if (this.composeProgress >= 75 && !this.isPipExpanded) {
          this.isPipExpanded = true
        }

        if (this.composeProgress >= 100) {
          clearInterval(composeInterval)
          setTimeout(() => {
            this.animationStep = 5
            setTimeout(() => {
              this.startDemoAnimation() // é‡æ–°å¼€å§‹å¾ªç¯
            }, 2000)
          }, 500)
        }
      }, 50)
    },

    getParticleStyle(index) {
      const angle = (index * 30 * Math.PI) / 180
      const radius = 30 + Math.sin(Date.now() / 500 + index) * 10
      return {
        left: `${50 + Math.cos(angle) * radius}%`,
        top: `${50 + Math.sin(angle) * radius}%`,
        animationDelay: `${index * 0.1}s`
      }
    },

    getSlideOpacity(index) {
      if (this.animationStep !== 4) return 0
      const progress = this.composeProgress
      const slideStart = index * 25
      const slideEnd = (index + 1) * 25
      if (progress < slideStart) return 0
      if (progress > slideEnd) return 0
      // æ·¡å…¥æ·¡å‡ºæ•ˆæœ
      const fadeRange = 5
      if (progress < slideStart + fadeRange) {
        return (progress - slideStart) / fadeRange
      }
      if (progress > slideEnd - fadeRange) {
        return (slideEnd - progress) / fadeRange
      }
      return 1
    },

    getSlidePosition(index) {
      if (this.animationStep !== 4) return 0
      const progress = this.composeProgress
      const slideStart = index * 25
      return (progress - slideStart) * 2
    },

    getSlideAnimationClass(index) {
      if (this.animationStep !== 4) return ''
      const progress = this.composeProgress
      const slideStart = index * 25
      const slideEnd = (index + 1) * 25

      if (progress >= slideStart && progress <= slideEnd) {
        return `slide-effect-${this.pptSlides[index].effect} active`
      }
      return ''
    },

    getSlideOverlayStyle(index) {
      if (this.animationStep !== 4) {
        return { opacity: 0, transform: 'scale(0.8)' }
      }

      const progress = this.composeProgress
      const slideStart = index * 25
      const slideEnd = (index + 1) * 25

      if (progress < slideStart || progress > slideEnd) {
        return { opacity: 0 }
      }

      const slideProgress = (progress - slideStart) / (slideEnd - slideStart)
      const effect = this.pptSlides[index].effect

      let transform = ''
      let opacity = 1

      switch (effect) {
      case 'fade':
        opacity =
            slideProgress < 0.2
              ? slideProgress / 0.2
              : slideProgress > 0.8
                ? (1 - slideProgress) / 0.2
                : 1
        break
      case 'slide':
        const slideX = slideProgress < 0.3 ? (0.3 - slideProgress) * 100 : 0
        transform = `translateX(${slideX}px)`
        break
      case 'zoom':
        const scale =
            slideProgress < 0.3
              ? 0.5 + (slideProgress / 0.3) * 0.5
              : slideProgress > 0.7
                ? 1 - ((slideProgress - 0.7) / 0.3) * 0.2
                : 1
        transform = `scale(${scale})`
        break
      case 'rotate':
        const rotate = slideProgress < 0.3 ? (1 - slideProgress / 0.3) * 10 : 0
        transform = `rotate(${rotate}deg)`
        break
      }

      return {
        opacity,
        transform: transform || 'none',
        zIndex: progress >= slideStart && progress <= slideEnd ? 10 : 1
      }
    },

    getPipStyle() {
      if (this.animationStep !== 4) {
        return {
          width: '100%',
          height: '100%',
          top: '0',
          left: '0',
          borderRadius: '0'
        }
      }

      const progress = this.composeProgress

      // å‰25%ï¼šç”»ä¸­ç”»ç¼©å°åˆ°å³ä¸‹è§’
      if (progress < 25) {
        const pipProgress = progress / 25
        const size = 100 - pipProgress * 70 // ä»100%ç¼©å°åˆ°30%
        const right = pipProgress * 10 // ç§»åŠ¨åˆ°å³è¾¹10%
        const bottom = pipProgress * 10 // ç§»åŠ¨åˆ°åº•éƒ¨10%

        return {
          width: `${size}%`,
          height: `${size}%`,
          top: 'auto',
          left: 'auto',
          right: `${right}%`,
          bottom: `${bottom}%`,
          borderRadius: '12px',
          transform: `scale(${0.8 + pipProgress * 0.2})`
        }
      }

      // 25%-75%ï¼šä¿æŒå°å°ºå¯¸
      if (progress < 75) {
        return {
          width: '30%',
          height: '30%',
          top: 'auto',
          left: 'auto',
          right: '10%',
          bottom: '10%',
          borderRadius: '12px',
          transform: 'scale(1)'
        }
      }

      // 75%-100%ï¼šæ”¾å¤§å›å…¨å±
      const expandProgress = (progress - 75) / 25
      const size = 30 + expandProgress * 70
      const right = 10 - expandProgress * 10
      const bottom = 10 - expandProgress * 10

      return {
        width: `${size}%`,
        height: `${size}%`,
        top: 'auto',
        left: 'auto',
        right: `${right}%`,
        bottom: `${bottom}%`,
        borderRadius: `${12 - expandProgress * 12}px`,
        transform: `scale(${1 + expandProgress * 0.1})`
      }
    }
  }
}
</script>

<style scoped>
/* æ ·å¼å·²åœ¨å…¨å±€ wegic-design-system.css ä¸­å®šä¹‰ */
</style>
