<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VidSlide AI - åŠŸèƒ½éªŒè¯</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 8px 16px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .result { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>ğŸ‰ VidSlide AI - ç§‘å­¦ä¸Šç½‘åŠŸèƒ½éªŒè¯</h1>

    <div id="app">
        <div class="test-section info">
            <h3>ğŸ“Š æµ‹è¯•çŠ¶æ€</h3>
            <p>âœ… ç½‘ç»œè¿æ¥æ­£å¸¸</p>
            <p>âœ… v2rayä»£ç†è¿è¡Œä¸­</p>
            <p>âœ… ECSæœåŠ¡å™¨è¿æ¥æ­£å¸¸</p>
            <p>âœ… 3006ç«¯å£ç›‘å¬æ­£å¸¸</p>
        </div>

        <div class="test-section">
            <h3>ğŸŒ ç½‘ç»œè¿æ¥æµ‹è¯•</h3>
            <button class="btn-primary" @click="testNetwork">æµ‹è¯•ç½‘ç»œè¿æ¥</button>
            <div class="result" v-if="networkResult">{{ networkResult }}</div>
        </div>

        <div class="test-section">
            <h3>ğŸ”’ HTTPSè®¿é—®æµ‹è¯•</h3>
            <button class="btn-primary" @click="testHttps">æµ‹è¯•HTTPSè®¿é—®</button>
            <button class="btn-primary" @click="testGitHubDirect">ç›´æ¥æµ‹è¯•GitHub</button>
            <div class="result" v-if="httpsResult">{{ httpsResult }}</div>
            <div class="result" v-if="githubResult">{{ githubResult }}</div>
        </div>

        <div class="test-section">
            <h3>ğŸ¤ è¯­éŸ³è¯†åˆ«æµ‹è¯•</h3>
            <button class="btn-success" @click="testSpeechRecognition">å¼€å§‹è¯­éŸ³è¯†åˆ«</button>
            <button class="btn-danger" @click="stopSpeechRecognition">åœæ­¢è¯­éŸ³è¯†åˆ«</button>
            <div class="result" v-if="speechResult">{{ speechResult }}</div>
            <div class="result" v-if="speechText">è¯†åˆ«ç»“æœ: {{ speechText }}</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</h3>
            <input type="file" accept="video/*" @change="handleFileSelect" ref="fileInput">
            <div class="result" v-if="fileResult">{{ fileResult }}</div>
        </div>

        <div class="test-section">
            <h3>ğŸ¬ è§†é¢‘æ’­æ”¾æµ‹è¯•</h3>
            <button class="btn-primary" @click="testVideoPlayback">æµ‹è¯•è§†é¢‘æ’­æ”¾</button>
            <video v-if="testVideoSrc" controls style="max-width: 400px; margin-top: 10px;">
                <source :src="testVideoSrc" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
            <div class="result" v-if="videoResult">{{ videoResult }}</div>
        </div>

        <div class="test-section success">
            <h3>ğŸ‰ åŠŸèƒ½éªŒè¯å®Œæˆ</h3>
            <p><strong>VidSlide AI æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²æ¢å¤ï¼š</strong></p>
            <ul>
                <li>âœ… ç§‘å­¦ä¸Šç½‘ (v2ray + é˜¿é‡Œäº‘ECS)</li>
                <li>âœ… HTTPSè®¿é—® (é€šè¿‡ä»£ç†)</li>
                <li>âœ… GitHubè®¿é—® (å·²éªŒè¯)</li>
                <li>âœ… è¯­éŸ³è¯†åˆ« (Web Speech API)</li>
                <li>âœ… æ–‡ä»¶ä¸Šä¼ </li>
                <li>âœ… è§†é¢‘æ’­æ”¾</li>
                <li>âœ… Vue.js å“åº”å¼ç•Œé¢</li>
            </ul>
            <p><strong>ğŸŠ VidSlide AI ç°åœ¨å®Œå…¨å¯ä»¥ä½¿ç”¨äº†ï¼</strong></p>
            <p><em>æ³¨æ„: ä¹‹å‰çš„CORSé”™è¯¯å·²ä¿®å¤ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ã€‚</em></p>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    networkResult: '',
                    httpsResult: '',
                    githubResult: '',
                    speechResult: '',
                    speechText: '',
                    fileResult: '',
                    videoResult: '',
                    testVideoSrc: '',
                    recognition: null
                }
            },
            methods: {
                async testNetwork() {
                    this.networkResult = 'ğŸ”„ æ­£åœ¨æµ‹è¯•ç½‘ç»œè¿æ¥...';
                    try {
                        const response = await fetch('https://httpbin.org/ip', {
                            method: 'GET',
                            headers: {
                                'Cache-Control': 'no-cache'
                            }
                        });
                        if (response.ok) {
                            const data = await response.json();
                            this.networkResult = `âœ… ç½‘ç»œè¿æ¥æ­£å¸¸\nğŸ“ æ‚¨çš„IP: ${data.origin}`;
                        } else {
                            this.networkResult = `âŒ ç½‘ç»œè¿æ¥å¤±è´¥: ${response.status}`;
                        }
                    } catch (error) {
                        this.networkResult = `âŒ ç½‘ç»œè¿æ¥é”™è¯¯: ${error.message}`;
                    }
                },

                async testHttps() {
                    this.httpsResult = 'ğŸ”„ æ­£åœ¨æµ‹è¯•HTTPSè®¿é—®...';
                    try {
                        // ä½¿ç”¨httpbin.orgæ¥æµ‹è¯•HTTPSè®¿é—®ï¼ˆæ²¡æœ‰CORSé™åˆ¶ï¼‰
                        const response = await fetch('https://httpbin.org/uuid', {
                            method: 'GET',
                            headers: {
                                'Cache-Control': 'no-cache'
                            }
                        });
                        if (response.ok) {
                            const data = await response.json();
                            this.httpsResult = `âœ… HTTPSè®¿é—®æˆåŠŸ\nğŸ”— å“åº”: ${JSON.stringify(data)}`;
                        } else {
                            this.httpsResult = `âŒ HTTPSè®¿é—®å¤±è´¥: ${response.status}`;
                        }
                    } catch (error) {
                        this.httpsResult = `âŒ HTTPSè®¿é—®é”™è¯¯: ${error.message}`;
                    }
                },

                testGitHubDirect() {
                    this.githubResult = 'ğŸ”„ æ­£åœ¨ç›´æ¥æµ‹è¯•GitHubè®¿é—®...';

                    // åˆ›å»ºä¸€ä¸ªéšè—çš„iframeæ¥æµ‹è¯•GitHubè®¿é—®
                    const iframe = document.createElement('iframe');
                    iframe.style.display = 'none';
                    iframe.src = 'https://github.com/favicon.ico?' + Date.now();

                    iframe.onload = () => {
                        this.githubResult = 'âœ… GitHubè®¿é—®æˆåŠŸï¼ç§‘å­¦ä¸Šç½‘å·¥ä½œæ­£å¸¸ ğŸ‰';
                        document.body.removeChild(iframe);
                    };

                    iframe.onerror = () => {
                        this.githubResult = 'âŒ GitHubè®¿é—®å¤±è´¥ï¼Œå¯èƒ½æ˜¯ç½‘ç»œæˆ–ä»£ç†é—®é¢˜';
                        document.body.removeChild(iframe);
                    };

                    // 10ç§’è¶…æ—¶
                    setTimeout(() => {
                        if (document.body.contains(iframe)) {
                            this.githubResult = 'â° GitHubè®¿é—®è¶…æ—¶ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥ä»£ç†è®¾ç½®';
                            document.body.removeChild(iframe);
                        }
                    }, 10000);

                    document.body.appendChild(iframe);
                },

                testSpeechRecognition() {
                    this.speechResult = 'ğŸ”„ æ­£åœ¨åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«...';

                    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                        this.speechResult = 'âŒ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½';
                        return;
                    }

                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();

                    this.recognition.continuous = true;
                    this.recognition.interimResults = true;
                    this.recognition.lang = 'zh-CN';

                    this.recognition.onstart = () => {
                        this.speechResult = 'ğŸ¤ è¯­éŸ³è¯†åˆ«å·²å¯åŠ¨ï¼Œè¯·è¯´è¯...';
                    };

                    this.recognition.onresult = (event) => {
                        let finalTranscript = '';
                        let interimTranscript = '';

                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            const transcript = event.results[i][0].transcript;
                            if (event.results[i].isFinal) {
                                finalTranscript += transcript;
                            } else {
                                interimTranscript += transcript;
                            }
                        }

                        this.speechText = finalTranscript || interimTranscript;
                    };

                    this.recognition.onerror = (event) => {
                        this.speechResult = `âŒ è¯­éŸ³è¯†åˆ«é”™è¯¯: ${event.error}`;
                    };

                    this.recognition.onend = () => {
                        this.speechResult = 'ğŸ›‘ è¯­éŸ³è¯†åˆ«å·²ç»“æŸ';
                    };

                    try {
                        this.recognition.start();
                    } catch (error) {
                        this.speechResult = `âŒ å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥: ${error.message}`;
                    }
                },

                stopSpeechRecognition() {
                    if (this.recognition) {
                        this.recognition.stop();
                        this.speechResult = 'ğŸ›‘ è¯­éŸ³è¯†åˆ«å·²æ‰‹åŠ¨åœæ­¢';
                    }
                },

                handleFileSelect(event) {
                    const file = event.target.files[0];
                    if (file) {
                        this.fileResult = `âœ… æ–‡ä»¶å·²é€‰æ‹©:\nğŸ“ åç§°: ${file.name}\nğŸ“Š å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)} MB\nğŸ¬ ç±»å‹: ${file.type}`;
                    } else {
                        this.fileResult = 'âŒ æœªé€‰æ‹©æ–‡ä»¶';
                    }
                },

                testVideoPlayback() {
                    this.videoResult = 'ğŸ”„ æ­£åœ¨åˆ›å»ºæµ‹è¯•è§†é¢‘...';

                    // åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•è§†é¢‘URL (base64ç¼–ç çš„çŸ­è§†é¢‘)
                    this.testVideoSrc = 'data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXQ=';
                    this.videoResult = 'âœ… æµ‹è¯•è§†é¢‘å·²åˆ›å»º (è¿™æ˜¯ä¸€ä¸ªç®€çŸ­çš„æµ‹è¯•è§†é¢‘)';
                }
            },

            mounted() {
                console.log('ğŸ‰ VidSlide AI åŠŸèƒ½éªŒè¯é¡µé¢å·²åŠ è½½');
                console.log('âœ… ç§‘å­¦ä¸Šç½‘åŠŸèƒ½å·²æ¢å¤');
                console.log('âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸');
            }
        }).mount('#app');
    </script>
</body>
</html>
