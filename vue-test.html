<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VidSlide AI - VueåŸºç¡€æµ‹è¯•</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            background: #007bff;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            background: #f8f9fa;
        }
        h1, h2 { color: #333; }
        .vue-test { border: 2px solid #007bff; padding: 15px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ VidSlide AI - VueåŸºç¡€æµ‹è¯•</h1>

        <div class="status info">
            <h3>ğŸ“Š Vueæµ‹è¯•çŠ¶æ€</h3>
            <p>æµ‹è¯•Vue 3 Composition APIåŸºç¡€åŠŸèƒ½</p>
            <div id="vue-results"></div>
        </div>

        <!-- Vueåº”ç”¨æŒ‚è½½ç‚¹ -->
        <div id="vue-app" class="vue-test">
            <h2>Vue 3 åŸºç¡€åŠŸèƒ½æµ‹è¯•</h2>

            <!-- åŸºç¡€å“åº”å¼æ•°æ® -->
            <div class="test-section">
                <h3>1ï¸âƒ£ å“åº”å¼æ•°æ®æµ‹è¯•</h3>
                <p>è®¡æ•°å™¨: <span id="counter">{{ counter }}</span></p>
                <button @click="increment">+1</button>
                <button @click="decrement">-1</button>
                <button @click="reset">é‡ç½®</button>
            </div>

            <!-- è®¡ç®—å±æ€§æµ‹è¯• -->
            <div class="test-section">
                <h3>2ï¸âƒ£ è®¡ç®—å±æ€§æµ‹è¯•</h3>
                <p>åŒå€è®¡æ•°: <span id="double-counter">{{ doubleCounter }}</span></p>
                <p>è®¡æ•°å™¨çŠ¶æ€: <span id="counter-status">{{ counterStatus }}</span></p>
            </div>

            <!-- æ¡ä»¶æ¸²æŸ“æµ‹è¯• -->
            <div class="test-section">
                <h3>3ï¸âƒ£ æ¡ä»¶æ¸²æŸ“æµ‹è¯•</h3>
                <button @click="toggleVisibility">åˆ‡æ¢æ˜¾ç¤º</button>
                <div v-if="isVisible" id="conditional-div">
                    <p>âœ… æ¡ä»¶æ¸²æŸ“å·¥ä½œæ­£å¸¸ï¼</p>
                </div>
                <div v-else>
                    <p>âŒ æ¡ä»¶æ¸²æŸ“è¢«éšè—</p>
                </div>
            </div>

            <!-- åˆ—è¡¨æ¸²æŸ“æµ‹è¯• -->
            <div class="test-section">
                <h3>4ï¸âƒ£ åˆ—è¡¨æ¸²æŸ“æµ‹è¯•</h3>
                <button @click="addItem">æ·»åŠ é¡¹ç›®</button>
                <button @click="removeItem">åˆ é™¤é¡¹ç›®</button>
                <ul id="item-list">
                    <li v-for="(item, index) in items" :key="index">
                        é¡¹ç›® {{ index + 1 }}: {{ item }}
                    </li>
                </ul>
            </div>

            <!-- äº‹ä»¶å¤„ç†æµ‹è¯• -->
            <div class="test-section">
                <h3>5ï¸âƒ£ äº‹ä»¶å¤„ç†æµ‹è¯•</h3>
                <input v-model="inputText" @input="handleInput" placeholder="è¾“å…¥ä¸€äº›æ–‡å­—...">
                <p>è¾“å…¥å†…å®¹: <span id="input-display">{{ inputText }}</span></p>
                <p>è¾“å…¥é•¿åº¦: <span id="input-length">{{ inputText.length }}</span></p>
            </div>

            <!-- æ–‡ä»¶ä¸Šä¼ æµ‹è¯• -->
            <div class="test-section">
                <h3>6ï¸âƒ£ æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</h3>
                <input type="file" @change="handleFileChange" accept="video/*" ref="fileInput">
                <div v-if="selectedFile">
                    <p>é€‰ä¸­æ–‡ä»¶: {{ selectedFile.name }}</p>
                    <p>æ–‡ä»¶å¤§å°: {{ formatFileSize(selectedFile.size) }}</p>
                    <p>æ–‡ä»¶ç±»å‹: {{ selectedFile.type }}</p>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœç»Ÿè®¡ -->
        <div class="status success">
            <h3>âœ… æµ‹è¯•ç»“æœ</h3>
            <div id="test-stats">
                <p>VueåŠŸèƒ½æµ‹è¯•: <span id="vue-working">ç­‰å¾…æµ‹è¯•...</span></p>
                <p>å“åº”å¼æ•°æ®: <span id="reactive-working">ç­‰å¾…æµ‹è¯•...</span></p>
                <p>è®¡ç®—å±æ€§: <span id="computed-working">ç­‰å¾…æµ‹è¯•...</span></p>
                <p>æ¡ä»¶æ¸²æŸ“: <span id="conditional-working">ç­‰å¾…æµ‹è¯•...</span></p>
                <p>åˆ—è¡¨æ¸²æŸ“: <span id="list-working">ç­‰å¾…æµ‹è¯•...</span></p>
                <p>äº‹ä»¶å¤„ç†: <span id="events-working">ç­‰å¾…æµ‹è¯•...</span></p>
                <p>æ–‡ä»¶å¤„ç†: <span id="file-working">ç­‰å¾…æµ‹è¯•...</span></p>
            </div>
        </div>
    </div>

    <script>
        // Vueæµ‹è¯•ç»“æœæ˜¾ç¤º
        function updateTestResult(testName, status) {
            const element = document.getElementById(testName);
            if (element) {
                element.textContent = status;
                element.style.color = status.includes('âœ…') ? '#28a745' : status.includes('âŒ') ? '#dc3545' : '#6c757d';
            }
        }

        // Vueåº”ç”¨
        const { createApp, ref, computed, onMounted } = Vue;

        const app = createApp({
            setup() {
                // å“åº”å¼æ•°æ®
                const counter = ref(0);
                const isVisible = ref(true);
                const items = ref(['é¡¹ç›®A', 'é¡¹ç›®B', 'é¡¹ç›®C']);
                const inputText = ref('');
                const selectedFile = ref(null);

                // è®¡ç®—å±æ€§
                const doubleCounter = computed(() => counter.value * 2);
                const counterStatus = computed(() => {
                    if (counter.value > 0) return 'æ­£æ•°';
                    if (counter.value < 0) return 'è´Ÿæ•°';
                    return 'é›¶';
                });

                // æ–¹æ³•
                const increment = () => counter.value++;
                const decrement = () => counter.value--;
                const reset = () => counter.value = 0;

                const toggleVisibility = () => isVisible.value = !isVisible.value;

                const addItem = () => items.value.push(`é¡¹ç›®${items.value.length + 1}`);
                const removeItem = () => items.value.pop();

                const handleInput = () => {
                    updateTestResult('events-working', 'âœ… äº‹ä»¶å¤„ç†æ­£å¸¸');
                };

                const handleFileChange = (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        selectedFile.value = file;
                        updateTestResult('file-working', 'âœ… æ–‡ä»¶å¤„ç†æ­£å¸¸');
                    }
                };

                const formatFileSize = (bytes) => {
                    if (bytes === 0) return '0 Bytes';
                    const k = 1024;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
                };

                // ç”Ÿå‘½å‘¨æœŸé’©å­
                onMounted(() => {
                    updateTestResult('vue-working', 'âœ… Vueåº”ç”¨æ­£å¸¸');
                    updateTestResult('reactive-working', 'âœ… å“åº”å¼æ•°æ®æ­£å¸¸');
                    updateTestResult('computed-working', 'âœ… è®¡ç®—å±æ€§æ­£å¸¸');
                    updateTestResult('conditional-working', 'âœ… æ¡ä»¶æ¸²æŸ“æ­£å¸¸');
                    updateTestResult('list-working', 'âœ… åˆ—è¡¨æ¸²æŸ“æ­£å¸¸');
                });

                return {
                    counter,
                    doubleCounter,
                    counterStatus,
                    isVisible,
                    items,
                    inputText,
                    selectedFile,
                    increment,
                    decrement,
                    reset,
                    toggleVisibility,
                    addItem,
                    removeItem,
                    handleInput,
                    handleFileChange,
                    formatFileSize
                };
            }
        });

        // æŒ‚è½½åº”ç”¨
        try {
            app.mount('#vue-app');
            updateTestResult('vue-working', 'âœ… Vueåº”ç”¨æ­£å¸¸');
        } catch (error) {
            updateTestResult('vue-working', `âŒ Vueåº”ç”¨å¤±è´¥: ${error.message}`);
            console.error('Vue app mount failed:', error);
        }

        // é¡µé¢é”™è¯¯å¤„ç†
        window.addEventListener('error', (event) => {
            console.error('é¡µé¢é”™è¯¯:', event.error);
            updateTestResult('vue-working', `âŒ é¡µé¢é”™è¯¯: ${event.error.message}`);
        });

        // Vueé”™è¯¯å¤„ç†
        app.config.errorHandler = (err, instance, info) => {
            console.error('Vueé”™è¯¯:', err, info);
            updateTestResult('vue-working', `âŒ Vueé”™è¯¯: ${err.message}`);
        };
    </script>
</body>
</html>
